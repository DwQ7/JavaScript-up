<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="div1" style="background-color: red;">
    div1
    <div id="div2" style="background-color: royalblue;">
        div2
        <div id="div3" style="background-color: violet;">
            div3
            <div id="div4" style="background-color: green;">
                这就是一个点击的时间
            </div>
        </div>
    </div>
</div>
<ul id = 'ul'>
    <li>第1个li</li>
    <li>第2个li</li>
    <li>第3个li</li>
    <li>第4个li</li>
    <li>第5个li</li>
</ul>
</body>
<script>
    //事件捕获
    let div4 = document.getElementById('div4');
    let div3 = document.getElementById('div3');
    let div2 = document.getElementById('div2');
    let div1 = document.getElementById('div1');
    div4.addEventListener('click',(e)=>{
        console.log('div4')
        console.log(e.target);
    },true)
    div3.addEventListener('click',(e)=>{
        console.log('div3')
        console.log(e.target);
    },true)
    // div2.addEventListener('click',(e)=>{
    //     console.log('div2')
    //     console.log(e.target);
    // },true)
    div2.addEventListener('mouseout',()=>{
        console.log('div2')
    },true)
    div1.addEventListener('click',(e)=>{
        console.log('div1')
        console.log(e.target);
    },true)
    //事件冒泡
    // let div4 = document.getElementById('div4');
    // let div3 = document.getElementById('div3');
    // let div2 = document.getElementById('div2');
    // let div1 = document.getElementById('div1');
    // div4.addEventListener('click',(event)=>{
    //     console.log(event.target)
    //     console.log('div4')
    // },false)
    // div3.addEventListener('click',(event)=>{
    //     event.stopPropagation(); //组织冒泡事件继续往上走 return false是直接组织这个click事件的发生
    //     console.log('div3')
    // },false)
    // div2.addEventListener('click',()=>{
    //     console.log('div2')
    // },false)
    // div1.addEventListener('click',()=>{
    //     console.log('div1')
    // },false)

    //事件代理（委托）
    // let ul = document.getElementById('ul');
    // ul.addEventListener('click',clickFunc,false) //默认是冒泡
    //
    // //点击li时候时候不会触发，然后会冒泡往上层，遇到ul标签绑定了事件，但是event的target仍然指向的是点击的元素
    // // 事件处理程序中的this值始终等于currentTarget的值，指向的是绑定到的那个元素
    function clickFunc(ev) {
        console.log(ev);
        ev = ev || window.event; //兼容ie浏览器
        let oLi = ev.srcElement || ev.target;
        console.log(oLi);
        if(oLi.nodeName.toLowerCase() === 'li'){
            alert(oLi.innerText)
        }
    }
</script>
</html>